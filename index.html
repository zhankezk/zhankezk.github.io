<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
		<head>
		<meta content="en-au" http-equiv="Content-Language" />
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
		<link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Blog Feed" />
		<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Blog Feed" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
		<title>Kb</title>
		<link rel="stylesheet" type="text/css" href="/css/style.css" />
		<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/8.4/styles/default.min.css">
		<link rel="shortcut icon" href="/img/favicon.ico" />
	</head>

	<body>
	    <!-- Google Tag Manager -->
		<noscript>
			<iframe src="//www.googletagmanager.com/ns.html?id=GTM-TQXXF7"
					height="0" width="0" style="display:none;visibility:hidden"></iframe>
		</noscript>
		<script>
			(function (w, d, s, l, i) {
				w[l] = w[l] || []; w[l].push({
					'gtm.start':
					new Date().getTime(), event: 'gtm.js'
				}); var f = d.getElementsByTagName(s)[0],
				j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
				'//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
			})(window, document, 'script', 'dataLayer', 'GTM-TQXXF7');</script>
		<!-- End Google Tag Manager -->
		<div id="container">
			<div id="side">
				<a href="/" id="home" title="Kb" alt="Kb">Kb</a>
				<div id="hometext"><a href="/" >Kb</a></div>
				<div class="section">
					<ul>
						<li><a href="/rss.xml"><img src="/img/25.png" /> feed</a></li>
					</ul>
				</div>
			</div>
			<div id="content">
				<ul class="posts">
    
        <li>
            <div class="idea">
                
                    <h1><a href="/2015/03/24/Sitecore-session-timeout-quickly-1-min-when-not-logged-in.html">Sitecore session expires(timeout) quickly(1 min) when not logged in</a></h1>
                    <div class="postdate">24 March, 2015
                        <ul>
                        
                        </ul>
                    </div>
                    <p><em>Can only consider this as a note to my self since it's all over the internet already.</em></p>
<h2>Symptoms:</h2>
<p>Session expires very quickly for Sitecore websites. Like only 1 minute.</p>
<h2>Cause and solution:</h2>
<p>In config file:</p>
<blockquote>
<p>Sitecore.Analytics.Tracking.config</p>
</blockquote>
<p>Robots' session timeout is set to 1 minute</p>
<pre><code class="language-xml">&lt;!--  ANALYTICS ROBOTS SESSION TIMEOUT
        The ASP.NET Session Timeout for auto detected robots. 
        When the automatic robot detection identifies a session as being a robot, the ASP.NET
        Session Timeout is set to this value (in minutes).
        Default: 1
  --&gt;
  &lt;setting name=&quot;Analytics.Robots.SessionTimeout&quot; value=&quot;1&quot; /&gt;
</code></pre>
<p>And this</p>
<pre><code class="language-asp">&lt;sc:VisitorIdentification id=&quot;VisitorIdentification&quot; runat=&quot;server&quot; /&gt;
</code></pre>
<p>is not in website layout causing all visitors to be considered as robots.</p>
<p>For Sitecore MVC, please check <a href="http://stackoverflow.com/questions/28626563/sitecore-7-5-mvc-and-httpcontext-session-timeout-set-to-1-min">asp.net mvc - Sitecore 7.5 MVC and HttpContext.Session.Timeout set to 1 min - Stack Overflow</a> out.</p>
<h2>Addtional Info:</h2>
<p>While searching for this issue, I came across something that has always been bothering us, it's the CMS editor's session expires quickly. The message</p>
<blockquote>
<p>The operation could not be completed. Your session may have been lost due to a timeout or a server failure. Please try again.</p>
</blockquote>
<p>shows up always when I try to select images or files. For this issue, sitecore actually has a patch, please go <a href="https://kb.sitecore.net/articles/135940">Session timeout when saving Rich Text fields</a> to check it out.</p>
<p>For actually the places to set the session timeout for sitecore, please Google, there're plenty out there.</p>
                    <br />
                    <a href="/2015/03/24/Sitecore-session-timeout-quickly-1-min-when-not-logged-in.html#disqus_thread">Comments</a>
                
            </div>
        </li>
    
        <li>
            <div class="idea">
                
                    <h2><a class="postlink" href="/2015/03/19/Chrome-request-page-twice.html">Browser requests page twice</a></h2>
                    <div class="postdate">19 March, 2015
                        <ul>
                        
                        </ul>
                    </div>
                    <h2>Issue: Pages gets requested twice in browsers.</h2>
<ul>
<li>Chrome - Requesting twice.
<ul>
<li>In Network Tab, Initiator says &quot;Parser&quot;.</li>
<li>Message in console
<blockquote>
<p>Resource interpreted as Image but transferred with MIME type text/html: &quot;http://pageurl&quot;</p>
</blockquote>
</li>
</ul>
</li>
<li>Firefox - No messages, but it is requesting twice.</li>
<li>Fidder - Not requesting twice.</li>
<li>When use Fidder to see Chrome and Firefox's requests, the second request head contains:
<blockquote>
<p>Accept: image/webp,<em>/</em>;q=0.8</p>
</blockquote>
</li>
</ul>
<h2>Cause: background-image: url</h2>
<pre><code class="language-html">&lt;div class=&quot;some-class&quot; style=&quot;background-image: url('')&quot;&gt;&lt;/div&gt;
</code></pre>
<p>Don't have much to say here, not sure if it's a bug or not.</p>
                    <a href="/2015/03/19/Chrome-request-page-twice.html#disqus_thread">Comments</a>
                
            </div>
        </li>
    
        <li>
            <div class="idea">
                
                    <h2><a class="postlink" href="/2015/03/15/From-mobile.html">From mobile</a></h2>
                    <div class="postdate">15 March, 2015
                        <ul>
                        
                        </ul>
                    </div>
                    <p>Testing from iPhone app, writing markdowns. Although can't publish it, but that's fine. I don't do news.</p>
                    <a href="/2015/03/15/From-mobile.html#disqus_thread">Comments</a>
                
            </div>
        </li>
    
        <li>
            <div class="idea">
                
                    <h2><a class="postlink" href="/2015/03/14/focusing-on-content.html">Focusing on content</a></h2>
                    <div class="postdate">14 March, 2015
                        <ul>
                        
                        </ul>
                    </div>
                    <p>Amazon AWS FreeTier is going to expire this month. Thinking about the money I gonna waste on an empty, not used much server, I came to the idea that uses static site and Github Pages hosting.</p>
<p>My personal blogging path has been: PjBlog -&gt; Wordpress -&gt; Umbraco -&gt; MiniBlog -&gt; Pretzel</p>
<p>Main reason to use Pretzel instead of Jekyll is that I am on Windows platform, it's always painful to run those linux stuff on it.</p>
<p>And I think for me as a developer, the focus has always been diverted by the technology that I use to build the blog, instead of writing and maintaining the blog itself. So by making content simple and single files, I hope that I can from now on, focus more on the content.</p>
<p><em>Update - later that day</em></p>
<p>Spent sometime migrated all the current site to here. I like this new site, feels much cleaner and simpler. Although now publishing is more complicated, but I guess it does help me focusing on the content, since all I need to do it open Notepadd++ to write.</p>
                    <a href="/2015/03/14/focusing-on-content.html#disqus_thread">Comments</a>
                
            </div>
        </li>
    
        <li>
            <div class="idea">
                
                    <h2><a class="postlink" href="/2015/01/13/Section-references-in-Sitecore-config-files-with-ref-attribute.html">Section references in Sitecore config files with ref attribute</a></h2>
                    <div class="postdate">13 January, 2015
                        <ul>
                        
                        </ul>
                    </div>
                    <p>Have seem a lot of usages with &quot;ref&quot; attributes when setting up Sitecore Lucene Indexes. Normally it's used to refer to another section of the config file. But I wanted to do more and couldn't find any more information about it. After some guessing and decompiling of Sitecore Dlls, here are some information I got.</p>
<ul>
<li>Attribute &quot;ref&quot; can be used to refer to another section of the configuration files in Sitecore.</li>
<li>The value of attribute &quot;ref&quot; is using Xpath.</li>
<li>Attribute &quot;ref&quot; are being used to create objects in all places and eventually come to this method:</li>
</ul>
<pre><code class="language-cs">public static object CreateObject(XmlNode configNode, string[] parameters, bool assert, IFactoryHelper helper)
{object obj = (((Factory.CreateFromFactory(configNode, parameters, assert) ?? Factory.CreateFromFactoryMethod(configNode, parameters, assert)) ?? Factory.CreateFromReference(configNode, parameters, assert)) ?? Factory.CreateFromTypeName(configNode, parameters, assert)) ?? Factory.CreateFromConnectionStringName(configNode, parameters, assert);}
</code></pre>
<ul>
<li>When obj is still null, it returns the value as string.</li>
</ul>
<p>So this is always being used to create a obj to assign to a property of the parent node.</p>
<p>when a node has 'hint=&quot;list:xxx&quot;', it means it's mapping to a method of the parent node's type(&quot;type&quot; atttibute). (please ref to this <a href="http://www.sitecore.net/Learn/Blogs/Technical-Blogs/John-West-Sitecore-Blog/Posts/2011/02/The-Sitecore-ASPNET-CMS-Configuration-Factory.aspx">Sitecore configuration factory and dependency injection</a> article on Sitecore Blog for more details)
Hope that helped you. Now if you still have time, you can keep reading to learn my story.</p>
<p>First, when setting up Sitecore 7 Lucene Index, you must have come across this line in the config:</p>
<pre><code class="language-xml">&lt;Analyzer ref=&quot;contentSearch/indexConfigurations/defaultLuceneIndexConfiguration/analyzer&quot; /&gt;
</code></pre>
<p>This works great, but I wanted to use it for &quot;ExcludeField&quot; fields as well to keep my custom index configuration clean. The default configuration looks like this:</p>
<pre><code class="language-xml">&lt;exclude hint=&quot;list:ExcludeField&quot;&gt;
&lt;__display_name&gt;{B5E02AD9-D56F-4C41-A065-A133DB87BDEB}&lt;/__display_name&gt;
&lt;/exclude&gt;
</code></pre>
<p>So I have tried to do this:</p>
<pre><code class="language-xml">&lt;exclude ref=&quot;contentSearch/indexConfigurations/defaultLuceneIndexConfiguration/exclude[@hint='list:ExcludeField']&quot; /&gt;
and:
&lt;exclude hint=&quot;list:ExcludeField&quot; ref=&quot;contentSearch/indexConfigurations/defaultLuceneIndexConfiguration/exclude[@hint='list:ExcludeField']&quot; /&gt;
</code></pre>
<p>None of them worked. Though the xpath is correct, but &quot;ExcludeField&quot; is a method and when you use &quot;ref&quot;, it tries to create an object as a property, so it fails.</p>
<p>Therefore my conclusion is that you can't use &quot;ref&quot; in configuration files for referencing methods. This is bad news for my clean configuration initiative, I still need to do more digging on this, will post it in another post which will focus on Sitecore Custom Lucene Indexes.</p>
                    <a href="/2015/01/13/Section-references-in-Sitecore-config-files-with-ref-attribute.html#disqus_thread">Comments</a>
                
            </div>
        </li>
    
</ul>
<h3>OLDER</h3>
<ul class="postArchive">

    <li>
        <span class="olderpostdate"> 11 Jan </span> <a class="postlink" href="/2015/01/11/Powerline-Ethernet-Adapters.html">Powerline Ethernet Adapters</a>
    </li>

    <li>
        <span class="olderpostdate"> 06 Jan </span> <a class="postlink" href="/2015/01/06/TDS-project-build-fail-in-Teamcity-with-VS-2012-runner.html">TDS project build fail in Teamcity with VS 2012 runner</a>
    </li>

    <li>
        <span class="olderpostdate"> 18 Dec </span> <a class="postlink" href="/2014/12/18/Sonos-with-Airsonos-on-Windows-and-Mac.html">Sonos with Airsonos on Windows and Mac</a>
    </li>

    <li>
        <span class="olderpostdate"> 17 Dec </span> <a class="postlink" href="/2014/12/17/Google-Tag-Manager-causing-placeholder-issues-in-IE-8.html">Google Tag Manager causing placeholder issues in IE 8</a>
    </li>

    <li>
        <span class="olderpostdate"> 13 Dec </span> <a class="postlink" href="/2014/12/13/IIS-Http-error-500.19-with-web.config.html">IIS Http error 500.19 with web.config</a>
    </li>

    <li>
        <span class="olderpostdate"> 13 Dec </span> <a class="postlink" href="/2014/12/13/Must-have-softwares-after-reinstalling-windows.html">Must have softwares after reinstalling windows</a>
    </li>

    <li>
        <span class="olderpostdate"> 11 Dec </span> <a class="postlink" href="/2014/12/11/Multi-Site-solution-deployments-in-Azure.html">Multi-Site solution deployments in Azure</a>
    </li>

    <li>
        <span class="olderpostdate"> 08 Dec </span> <a class="postlink" href="/2014/12/08/IncludeTemplates-and-ExcludeTemplates-warning-for-custom-index-of-Sitecore.html">IncludeTemplates and ExcludeTemplates warning for custom index of Sitecore</a>
    </li>

    <li>
        <span class="olderpostdate"> 08 Dec </span> <a class="postlink" href="/2014/12/08/Schedule-tasks-not-running-on-CDS-in-Sitecore.html">Schedule tasks not running on CDS in Sitecore</a>
    </li>

    <li>
        <span class="olderpostdate"> 07 Dec </span> <a class="postlink" href="/2014/12/07/Sitecore-Redirect-Manager.html">Sitecore Redirect Manager</a>
    </li>

    <li>
        <span class="olderpostdate"> 04 Dec </span> <a class="postlink" href="/2014/12/04/Sitecore-indexes-media-url-with-sitecore-shell.html">Sitecore Indexes media url with /sitecore/shell</a>
    </li>

</ul>
<script type="text/javascript">
//<![CDATA[
(function() {
    var links = document.getElementsByTagName('a');
    var query = '?';
    for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
        query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
    }
    }
    document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/kezblog/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
			</div>
		</div>
		<script src="//cdn.jsdelivr.net/highlight.js/8.4/highlight.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</body>
</html>