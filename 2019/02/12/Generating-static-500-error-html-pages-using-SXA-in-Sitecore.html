<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
		<head>
		<meta content="en-au" http-equiv="Content-Language" />
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
		<link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Blog Feed" />
		<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Blog Feed" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
		<title>Generating static 500 error html pages using SXA in Sitecore</title>
		<link rel="stylesheet" type="text/css" href="/css/style.css" />
		<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/8.4/styles/default.min.css">
		<link rel="shortcut icon" href="/img/favicon.ico" />
		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-0296752641130175",
    enable_page_level_ads: true
  });
</script>
	</head>

	<body>
	    <!-- Google Tag Manager -->
		<noscript>
			<iframe src="//www.googletagmanager.com/ns.html?id=GTM-TQXXF7"
					height="0" width="0" style="display:none;visibility:hidden"></iframe>
		</noscript>
		<script>
			(function (w, d, s, l, i) {
				w[l] = w[l] || []; w[l].push({
					'gtm.start':
					new Date().getTime(), event: 'gtm.js'
				}); var f = d.getElementsByTagName(s)[0],
				j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
				'//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
			})(window, document, 'script', 'dataLayer', 'GTM-TQXXF7');</script>
		<!-- End Google Tag Manager -->
		<script type="text/javascript">  var appInsights=window.appInsights||function(config){    function r(config){t[config]=function(){var i=arguments;t.queue.push(function(){t[config].apply(t,i)})}}var t={config:config},u=document,e=window,o="script",s=u.createElement(o),i,f;for(s.src=config.url||"//az416426.vo.msecnd.net/scripts/a/ai.0.js",u.getElementsByTagName(o)[0].parentNode.appendChild(s),t.cookie=u.cookie,t.queue=[],i=["Event","Exception","Metric","PageView","Trace"];i.length;)r("track"+i.pop());return r("setAuthenticatedUserContext"),r("clearAuthenticatedUserContext"),config.disableExceptionTracking||(i="onerror",r("_"+i),f=e[i],e[i]=function(config,r,u,e,o){var s=f&&f(config,r,u,e,o);return s!==!0&&t["_"+i](config,r,u,e,o),s}),t    }({        instrumentationKey:"87fb325d-c796-4ef5-9497-fcef28dc8564"    });           window.appInsights=appInsights;    appInsights.trackPageView();</script>
		<div id="container">
			<div id="side">
				<div id="hometext"><a href="/" id="home" title="KB" alt="KB">KB</a></div>
				<div class="section">
					<ul>
						<li><a href="/rss.xml"><img src="/img/25.png" /> feed</a></li>
						<li><a href="https://mdyard.azurewebsites.net/">&nbsp;&nbsp;&nbsp;&nbsp;</a></li>
					</ul>
				</div>
			</div>
			<div id="content">
				<div class="entry-container">
	<div class='entry'>
		<h1> Generating static 500 error html pages using SXA in Sitecore </h1>
		<span class="postdate">12 February, 2019
			
		</span>
		<div><div>For error page handling, normally there is 404 page and 500 pages. For 500 pages however, there are errors only happen on particular pages and errors happening on every page, which means if it’s the second case, a dynamic <a target="_blank" href='http://asp.net'>asp.net</a>&nbsp;page won’t work for an error page since it will be broken too. That’s why it’s good practise to setup a static html version of the 500 error page.</div><div><br /></div><div>For Sitecore SXA, it’s pretty easy. Just follow official documentation here&nbsp;<a target="_blank" href='https://doc.sitecore.com/developers/sxa/18/sitecore-experience-accelerator/en/generate-a-custom-static-error-page.html'>https://doc.sitecore.com/developers/sxa/18/sitecore-experience-accelerator/en/generate-a-custom-static-error-page.html</a></div><div><br /></div><div>However few things worth saying here:</div><ul><li><div>Things the documentation didn't say:</div></li><ul><li><div>It works only for CM instance (or standalone of course). Meaning it only generates the html file on the instance you run the command.</div></li><li><div>For CD, item needs to be published and files needs to be manually copied over from CM. Publishing is more for the setting purpose I think, and the static html files are under wwwroot/ErrorPages folder.</div></li></ul><li><div>Potenially error on Azure</div></li><ul><li><div>If you setup IP access restrictions for your Azure Web App (which is recommended for CM role), you need to whitelist the websites' IP to allow the generation since it’s just calling the 500 content page via http(s) calls.</div></li><li><div>To get the website’s server IP, you can do so in KUDO using powershell:&nbsp;(New-Object Net.WebClient).DownloadFile('<a target="_blank" href='https://api.ipify.org/?format=json'>https://api.ipify.org/?format=json</a>', 'ip.txt’), then just view the content of the ip.txt file.</div></li><li><div>You can also create an inline aspx page to do similar things, up to you...</div></li></ul></ul><div><br /></div><div><br /></div></div><div><br /></div>
	</div>
</div>
<div id="page-navigation"> 
	<div class="left">  <a href="/2018/12/18/Whitelist-Hosted-Agent-IP-address-in-AzureDevOps-pipeline-For-Sitecore-Unicorn-Sync.html" title="Previous Post: Whitelist Hosted Agent IP address in AzureDevOps pipeline (For Sitecore Unicorn Sync)">&larr; Whitelist Hosted Agent IP address in AzureDevOps pipeline (For Sitecore Unicorn Sync)</a>  </div> 
	<div class="right">  </div> 
	<div class="clear">&nbsp;</div>
</div> 



<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'kezblog'; 
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="//disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

			</div>
		</div>
		<script src="//cdn.jsdelivr.net/highlight.js/8.4/highlight.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
	</body>
</html>